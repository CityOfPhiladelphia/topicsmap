(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["tcg_pvc_ePayForm"],{"0514":function(t,e,n){"use strict";
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */var a=/["'&<>]/;function r(t){var e,n=""+t,r=a.exec(n);if(!r)return n;var s="",o=0,i=0;for(o=r.index;o<n.length;o++){switch(n.charCodeAt(o)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==o&&(s+=n.substring(i,o)),i=o+1,s+=e}return i!==o?s+n.substring(i,o):s}t.exports=r},"08bb":function(t,e,n){var a=n("1f39"),r=n("1462");t.exports=function(t,e,n){if(a(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(r(t))}},"1f39":function(t,e,n){var a=n("db4a"),r=n("1c96"),s=n("6b5c")("match");t.exports=function(t){var e;return a(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},2982:function(t,e,n){"use strict";var a=n("e313"),r=n("08bb"),s="includes";a(a.P+a.F*n("c9ce")(s),"String",{includes:function(t){return!!~r(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},c929:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{action:t.actionAddress,method:"post",target:"_blank"}},[n("input",{attrs:{name:"billStmt",type:"hidden"},domProps:{value:t.xmlData}}),n("input",{directives:[{name:"show",rawName:"v-show",value:this.shouldShowButton,expression:"this.shouldShowButton"}],staticClass:"button external",style:t.buttonStyle,attrs:{type:"submit"},domProps:{value:this.$props.slots.text}})])},r=[],s=n("f577"),o=n("a4bb"),i=n.n(o),u=n("cf8a"),c=n("0514"),l=n.n(c),p=function(t){if(console.log("generate billing xml",t),i()(t).length<1)return"";var e=Object(u["format"])(new Date,"YYYY-MM-DDTHH:mm:ssZ"),n='<?xml version="1.0" encoding="utf-16"?>\n<BillingStatement xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">\n  <ApplicationID>fcd68fd2-e923-4b03-a0e7-a678c2ed612a</ApplicationID>\n  <AccountNumber />\n  <BillNumber>'.concat(t.balances.accountNum,"</BillNumber>\n  <StatementNumber />\n  <BillingDate>").concat(e,"</BillingDate>\n  <DueDate>").concat(e,"</DueDate>\n  <TotalDue>").concat(t.totalDue,"</TotalDue>\n  <DepartMentId>0</DepartMentId>\n  <Fund>0</Fund>\n  <PaymentDate>0001-01-01T00:00:00</PaymentDate>\n  <Quantity>0</Quantity>\n  <ItemAmount>0</ItemAmount>\n  <TotalAmountdue>0</TotalAmountdue>\n  <PartialPaymentFlag>false</PartialPaymentFlag>\n  <ReceiptpresentFlag>false</ReceiptpresentFlag>\n  <Details>\n    <BillingStatementDetail>\n      <ItemDate>").concat(e,"</ItemDate>\n      <ItemDescription>Real Estate Tax</ItemDescription>\n      <Charges>").concat(t.totalDue,"</Charges>\n      <Credits>0</Credits>\n    </BillingStatementDetail>\n  </Details>\n  <Customers>\n    <Customer>\n      <FirstName>").concat(t.balances.property.ownerName,"</FirstName>\n      <MiddleName />\n      <LastName />\n      <BillingAddress>\n        <Address>\n          <AddressLine1>").concat(t.address.streetAddress,"</AddressLine1>\n          <City>PHILADELPHIA</City>\n          <State>PA</State>\n          <PostalCode>").concat(t.address.zipCode,"</PostalCode>\n          <Country>US</Country>\n        </Address>\n      </BillingAddress>\n    </Customer>\n  </Customers>\n</BillingStatement>\n  ");return l()(n)},d=["principal","interest","penalty","other"],f={mixins:[s["a"]],data:function(){var t={parseData:{accountNum:this.$store.state.sources.tips.data.data.accountNum,totalDue:"",balances:this.$store.state.sources.tips.data.data,address:{streetAddress:this.$store.state.sources.tips.data.data.property.address,zipCode:this.$store.state.geocode.data.properties.zip_code}},xmlData:{},buttonStyle:"height: "+this.$props.options.height+"px;       width: "+this.$props.options.width+"px;       font-size: "+this.$props.options.fontSize+"px;       ",actionAddress:this.$props.options.actionAddress||"https://test-secure.phila.gov/PaymentCenter/Gateway1/InitiatePurchase.aspx"};return t},created:function(){this.parseData.totalDue=this.calculateTotalDue(),this.$store.commit("setPropertyBalance",this.parseData.totalDue),this.xmlData=p(this.parseData)},computed:{message:function(){if(this.$props.slots)return this.evaluateSlot(this.$props.slots.text)},class:function(){if(this.$props.options)return this.$props.options.class||""},style:function(){if(this.$props.options)return this.$props.options.style||""},shouldShowButton:function(){return this.parseData.totalDue>0}},methods:{calculateTotalDue:function(){var t=this;return this.parseData.balances.years.reduce(function(e,n){var a=t.calculateTotalForYear(n);return e+a},0)},calculateTotalForYear:function(t){var e=d.map(function(e){return t[e]});return e.reduce(function(t,e){return t+e},0)}}},h=f,m=n("2877"),b=Object(m["a"])(h,a,r,!1,null,"d8329984",null);e["default"]=b.exports},c9ce:function(t,e,n){var a=n("6b5c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[a]=!1,!"/./"[t](e)}catch(r){}}return!0}},f577:function(t,e,n){"use strict";n("60ae"),n("2982");var a,r,s=n("a4bb"),o=n.n(s),i=n("5d73"),u=n.n(i),c=n("7618"),l={props:{slots:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},item:{type:Object,default:function(){return{}}}},beforeCreate:function(){},created:function(){},computed:{nullValue:function(){var t=this.options||{};return t.nullValue}},methods:{evaluateSlot:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t)return t;var r,s=Object(c["a"])(t);if("function"===s){var i=this.$store.state,l=this.$controller,p=t,d=this.item;r=d?p(i,d,l):p(i)}else r=t;if(!1===r);else if(!r)return a;var f=!0,h=!1,m=void 0;try{for(var b,D=function(){var t=b.value,n=e.$config.transforms[t],a=void 0,s=n.globals;s&&(a=o()(window).filter(function(t){return s.includes(t)}).reduce(function(t,e){return t[e]=window[e],t},{}));var i=n.transform;r=i(r,a)},g=u()(n);!(f=(b=g.next()).done);f=!0)D()}catch(v){h=!0,m=v}finally{try{f||null==g.return||g.return()}finally{if(h)throw m}}return r}}},p=l,d=n("2877"),f=Object(d["a"])(p,a,r,!1,null,null,null);e["a"]=f.exports}}]);
//# sourceMappingURL=tcg_pvc_ePayForm.706ae0ac.js.map